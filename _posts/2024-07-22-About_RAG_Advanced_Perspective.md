---
title: About_RAG_Advanced_Perspective
date: 2024-07-22 12:10:20 +09:00
categories: [AI, NLP]
tags:
  [
    LLM,
    GPT API,
    RAG,
    NLP,
    자연어처리,
    AI,
    .
    .
    .
  ]
---


# 🚽 RAG 구축 시 트러블 슈팅


| 파트 | 흐름 |
|:---:|:---:|
|`문서`| 문서 로더 - 텍스트 Split - 백터 임베딩 - `백터 스토어` |
|`저장소`|`백터 스토어` - Retrievers - 유사 문장 출력 |
|`사용자`| 사용자 질문 - 백터 임베딩 - `백터 스토어` |


```shell
> 기본 구조의 RAG 구축은 쉬움
> 그러나 실제 프로덕트 개발을 위해 RAG 품질을 높이기 위해서는 고급 기법 활용 필요
> 특히 Retriever 의 경우, 사용자 질문의 의도를 파악하여 고품질 답변 요구
```

**Multi-Query**
1. 대충 질문해도 좋은 답변을 원하는 경우
    - 프롬프트 엔지니어링 없이도 퀄리티 높은 답변

    - 사용자의 의도를 파악하여 유추
<br><br>

**Parent-Document**

2. 앞뒤 문맥을 잘 담아야하는 경우
    - 청크가 앞뒤 문장을 잘 담지 않고 끊어서 모델링
<br><br>

**Self-Querying** : 사용자의 질의를 재해석

3. 시맨틱 검색 말고 쿼리가 필요한 경우
    - 사용자 문장과 백터 스토어 간 연관성이 아닌 SQL 쿼리가 필요
<br><br>

**Time-Weighted**

4. 오래된 자료는 덜 참고하고 싶은  경우
    - 가장 최근에 업로드한 파일의 가중치를 높게 추출


### Multi - Query Retriever

- 사용자 질문을 여러개의 유사 질문으로 재생성

```shell
Q. B 은행의 대출은 어때?

MQR (1) - B 은행의 대출 금리는 어때?
MQR (2) - B 은행의 대출 조건은 어때?
MQR (3) - B 은행의 대출 후기는 어때?
```
